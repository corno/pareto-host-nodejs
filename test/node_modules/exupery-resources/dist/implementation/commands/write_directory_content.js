"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.$$ = void 0;
const _pc = __importStar(require("pareto-core-command"));
const _pt = __importStar(require("pareto-core-transformer"));
const t_path_to_path = __importStar(require("../transformers/schemas/path/path"));
exports.$$ = _pc.create_command_procedure(($p, $cr, $qr) => [
    // $cr['make directory'].execute(
    //     $p.path,
    //     ($): inf.Error => ['make directory', $]
    // ),
    _pc.p.dictionary.parallel($p.directory, ($, key) => [
        _pt.cc($, ($) => {
            switch ($[0]) {
                case 'other': return _pt.ss($, ($) => _pc.p.sequence([]));
                case 'file': return _pt.ss($, ($) => $cr['write file'].execute({
                    'path': t_path_to_path.create_node_path($p.path, key),
                    'data': $
                }, ($) => ['file', $]));
                case 'directory': return _pt.ss($, ($) => (0, exports.$$)($cr, null).execute({
                    'directory': $,
                    'path': t_path_to_path.extend_context_path($p.path, { 'addition': key }),
                }, ($) => ['directory', $]));
                default: return _pt.au($[0]);
            }
        })
    ], ($) => ['directory content', $])
]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid3JpdGVfZGlyZWN0b3J5X2NvbnRlbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvaW1wbGVtZW50YXRpb24vY29tbWFuZHMvd3JpdGVfZGlyZWN0b3J5X2NvbnRlbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSx5REFBMEM7QUFDMUMsNkRBQThDO0FBUTlDLGtGQUFtRTtBQUV0RCxRQUFBLEVBQUUsR0FBZ0QsR0FBRyxDQUFDLHdCQUF3QixDQUN2RixDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNkLGlDQUFpQztJQUNqQyxlQUFlO0lBQ2YsOENBQThDO0lBQzlDLEtBQUs7SUFDTCxHQUFHLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQ3JCLEVBQUUsQ0FBQyxTQUFTLEVBQ1osQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztRQUNSLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDWixRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUNYLEtBQUssT0FBTyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtnQkFDekQsS0FBSyxNQUFNLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUMxRDtvQkFDSSxNQUFNLEVBQUUsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDO29CQUNyRCxNQUFNLEVBQUUsQ0FBQztpQkFDWixFQUNELENBQUMsQ0FBQyxFQUF3QyxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQzNELENBQUMsQ0FBQTtnQkFDRixLQUFLLFdBQVcsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUEsVUFBRSxFQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQzNEO29CQUNJLFdBQVcsRUFBRSxDQUFDO29CQUNkLE1BQU0sRUFBRSxjQUFjLENBQUMsbUJBQW1CLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsQ0FBQztpQkFDM0UsRUFDRCxDQUFDLENBQUMsRUFBd0MsRUFBRSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUVoRSxDQUFDLENBQUE7Z0JBRUYsT0FBTyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQ2hDLENBQUM7UUFDTCxDQUFDLENBQUM7S0FDTCxFQUNELENBQUMsQ0FBQyxFQUFtQyxFQUFFLENBQUMsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUMsQ0FDbkU7Q0FDSixDQUNKLENBQUEifQ==