"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.deprecated_assert = exports.deprecated_conditional = exports.refine_stacked = exports.refine_with_error_transformation = exports.refine_without_error_transformation = exports.query_stacked = exports.query_without_error_transformation = exports.sequence = exports.create_error_handling_context = exports.dictionary = exports.list = exports.if_ = exports.fail = exports.assert = void 0;
const _pinternals = __importStar(require("pareto-core-internals"));
const create_command_promise_1 = require("./create_command_promise");
const sequence_1 = require("./sequence");
const assert = (assertion, error_if_failed) => {
    return (0, create_command_promise_1.__create_command_promise)({
        'execute': (on_success, on_error) => {
            if (!assertion) {
                on_error(error_if_failed);
                return;
            }
            on_success();
        }
    });
};
exports.assert = assert;
const fail = (error) => {
    return (0, create_command_promise_1.__create_command_promise)({
        'execute': (on_success, on_error) => {
            on_error(error);
        }
    });
};
exports.fail = fail;
const if_ = (precondition, command_block, else_command_block) => {
    return (0, create_command_promise_1.__create_command_promise)({
        'execute': (on_success, on_error) => {
            if (precondition) {
                (0, sequence_1.__sequence)(command_block).__start(on_success, on_error);
            }
            else {
                if (else_command_block !== undefined) {
                    (0, sequence_1.__sequence)(else_command_block).__start(on_success, on_error);
                }
                else {
                    on_success();
                }
            }
        }
    });
};
exports.if_ = if_;
var list;
(function (list) {
    list.parallel = (the_array, errors_aggregator) => {
        return (0, create_command_promise_1.__create_command_promise)({
            'execute': (on_success, on_error) => {
                const errors_builder = _pinternals.create_asynchronous_list_builder();
                _pinternals.create_asynchronous_processes_monitor((monitor) => {
                    the_array.map(($) => {
                        monitor['report process started']();
                        $.__start(() => {
                            monitor['report process finished']();
                        }, (e) => {
                            errors_builder['add item'](e);
                            monitor['report process finished']();
                        });
                    });
                }, () => {
                    const errors = errors_builder['get list']();
                    if (errors.is_empty()) {
                        on_success();
                    }
                    else {
                        on_error(errors_aggregator(errors));
                    }
                });
            }
        });
    };
    list.serie = (array) => {
        return (0, create_command_promise_1.__create_command_promise)({
            'execute': (on_success, on_error) => {
                let current = 0;
                const do_next = () => {
                    array.__get_element_at(current).transform(($) => {
                        current += 1;
                        $.__start(() => {
                            do_next();
                        }, on_error);
                    }, () => {
                        on_success();
                    });
                };
                do_next();
            }
        });
    };
})(list || (exports.list = list = {}));
var dictionary;
(function (dictionary_1) {
    dictionary_1.parallel = (dictionary, block, aggregate_errors) => {
        return (0, create_command_promise_1.__create_command_promise)({
            'execute': (on_success, on_error) => {
                const errors_builder = _pinternals.create_asynchronous_dictionary_builder();
                _pinternals.create_asynchronous_processes_monitor((monitor) => {
                    dictionary.map(($, key) => {
                        monitor['report process started']();
                        (0, sequence_1.__sequence)(block($, key)).__start(() => {
                            monitor['report process finished']();
                        }, (e) => {
                            errors_builder['add entry'](key, e);
                            monitor['report process finished']();
                        });
                    });
                }, () => {
                    const errors = errors_builder['get dictionary']();
                    if (errors.is_empty()) {
                        on_success();
                    }
                    else {
                        on_error(aggregate_errors(errors));
                    }
                });
            }
        });
    };
    let deprecated_parallel;
    (function (deprecated_parallel) {
        deprecated_parallel.query = (staging_result, block, aggregate_errors) => {
            return (0, create_command_promise_1.__create_command_promise)({
                'execute': (on_success, on_error) => {
                    const errors_builder = _pinternals.create_asynchronous_dictionary_builder();
                    staging_result.__extract_data((dictionary) => {
                        _pinternals.create_asynchronous_processes_monitor((monitor) => {
                            dictionary.map(($, key) => {
                                monitor['report process started']();
                                (0, sequence_1.__sequence)(block($, key)).__start(() => {
                                    monitor['report process finished']();
                                }, (e) => {
                                    errors_builder['add entry'](key, e);
                                    monitor['report process finished']();
                                });
                            });
                        }, () => {
                            const errors = errors_builder['get dictionary']();
                            if (errors.is_empty()) {
                                on_success();
                            }
                            else {
                                on_error(aggregate_errors(errors));
                            }
                        });
                    }, on_error);
                }
            });
        };
    })(deprecated_parallel = dictionary_1.deprecated_parallel || (dictionary_1.deprecated_parallel = {}));
    dictionary_1.serie = (dictionary, error_transformer) => {
        return (0, create_command_promise_1.__create_command_promise)({
            'execute': (on_success, on_error) => {
                const as_list = dictionary.to_list(($, key) => ({
                    'key': key,
                    'value': $,
                }));
                let current = 0;
                const do_next = () => {
                    as_list.__get_element_at(current).transform(($) => {
                        const key = $.key;
                        current += 1;
                        $.value.__start(() => {
                            do_next();
                        }, ($) => {
                            on_error(error_transformer({
                                'value': $,
                                'key': key,
                            }));
                        });
                    }, () => {
                        on_success();
                    });
                };
                do_next();
            }
        });
    };
    dictionary_1.deprecated_parallel_without_transforming_the_error = (dictionary) => {
        return (0, create_command_promise_1.__create_command_promise)({
            'execute': (on_success, on_error) => {
                const errors_builder = _pinternals.create_asynchronous_dictionary_builder();
                _pinternals.create_asynchronous_processes_monitor((monitor) => {
                    dictionary.map(($, key) => {
                        monitor['report process started']();
                        $.__start(() => {
                            monitor['report process finished']();
                        }, (e) => {
                            errors_builder['add entry'](key, e);
                            monitor['report process finished']();
                        });
                    });
                }, () => {
                    const errors = errors_builder['get dictionary']();
                    if (errors.is_empty()) {
                        on_success();
                    }
                    else {
                        on_error(errors);
                    }
                });
            }
        });
    };
})(dictionary || (exports.dictionary = dictionary = {}));
const create_error_handling_context = (command_block, processor, new_error) => {
    return (0, create_command_promise_1.__create_command_promise)({
        'execute': (on_success, on_error) => {
            (0, sequence_1.__sequence)(command_block).__start(on_success, (e) => {
                processor(e).__start(() => {
                    on_error(new_error);
                }, on_error);
            });
        }
    });
};
exports.create_error_handling_context = create_error_handling_context;
// Sequencing function:
const sequence = (block) => {
    return (0, create_command_promise_1.__create_command_promise)({
        'execute': (on_success, on_error) => {
            const length = _pinternals.list_literal(block).get_number_of_elements();
            const runStep = (index) => {
                if (index >= length) {
                    on_success();
                    return;
                }
                block[index].__start(() => runStep(index + 1), on_error);
            };
            runStep(0);
        }
    });
};
exports.sequence = sequence;
const query_without_error_transformation = (staging_result, command_block) => {
    return (0, create_command_promise_1.__create_command_promise)({
        'execute': (on_success, on_error) => {
            staging_result.__extract_data((output) => {
                (0, sequence_1.__sequence)(command_block(output)).__start(() => {
                    on_success();
                }, (e) => {
                    on_error(e);
                });
            }, (e) => {
                on_error(e);
            });
        }
    });
};
exports.query_without_error_transformation = query_without_error_transformation;
const query_stacked = (staging_result, parent_data, command_block) => {
    return (0, create_command_promise_1.__create_command_promise)({
        'execute': (on_success, on_error) => {
            staging_result.__extract_data((output) => {
                (0, sequence_1.__sequence)(command_block(output, parent_data)).__start(() => {
                    on_success();
                }, (e) => {
                    on_error(e);
                });
            }, on_error);
        }
    });
};
exports.query_stacked = query_stacked;
const refine_without_error_transformation = (staging_result, command_block) => {
    return (0, create_command_promise_1.__create_command_promise)({
        'execute': (on_success, on_error) => {
            staging_result.__extract_data((output) => {
                (0, sequence_1.__sequence)(command_block(output)).__start(() => {
                    on_success();
                }, (e) => {
                    on_error(e);
                });
            }, (e) => {
                on_error(e);
            });
        }
    });
};
exports.refine_without_error_transformation = refine_without_error_transformation;
const refine_with_error_transformation = (staging_result, error_transformer, command_block) => {
    return (0, create_command_promise_1.__create_command_promise)({
        'execute': (on_success, on_error) => {
            staging_result.__extract_data((output) => {
                (0, sequence_1.__sequence)(command_block(output)).__start(() => {
                    on_success();
                }, (e) => {
                    on_error(e);
                });
            }, (e) => {
                on_error(error_transformer(e));
            });
        }
    });
};
exports.refine_with_error_transformation = refine_with_error_transformation;
const refine_stacked = (staging_result, parent_data, command_block) => {
    return (0, create_command_promise_1.__create_command_promise)({
        'execute': (on_success, on_error) => {
            staging_result.__extract_data((output) => {
                (0, sequence_1.__sequence)(command_block(output, parent_data)).__start(() => {
                    on_success();
                }, (e) => {
                    on_error(e);
                });
            }, on_error);
        }
    });
};
exports.refine_stacked = refine_stacked;
var deprecated_conditional;
(function (deprecated_conditional) {
    deprecated_conditional.query = (precondition, command, else_command) => {
        return (0, create_command_promise_1.__create_command_promise)({
            'execute': (on_success, on_error) => {
                precondition.__extract_data(($) => {
                    if ($) {
                        command.__start(on_success, on_error);
                    }
                    else {
                        if (else_command !== undefined) {
                            else_command.__start(on_success, on_error);
                        }
                        else {
                            on_success();
                        }
                    }
                }, on_error);
            }
        });
    };
})(deprecated_conditional || (exports.deprecated_conditional = deprecated_conditional = {}));
var deprecated_assert;
(function (deprecated_assert) {
    deprecated_assert.query = (assertion, error_if_failed) => {
        return (0, create_command_promise_1.__create_command_promise)({
            'execute': (on_success, on_error) => {
                assertion.__extract_data(($) => {
                    if ($) {
                        on_success();
                    }
                    else {
                        on_error(error_if_failed);
                    }
                }, ($) => {
                    on_error($);
                });
            }
        });
    };
})(deprecated_assert || (exports.deprecated_assert = deprecated_assert = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9ucy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9hY3Rpb25zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsbUVBQW9EO0FBRXBELHFFQUFtRTtBQUNuRSx5Q0FBdUM7QUFHaEMsTUFBTSxNQUFNLEdBQUcsQ0FDbEIsU0FBa0IsRUFDbEIsZUFBc0IsRUFDSSxFQUFFO0lBQzVCLE9BQU8sSUFBQSxpREFBd0IsRUFBQztRQUM1QixTQUFTLEVBQUUsQ0FBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLEVBQUU7WUFDaEMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO2dCQUNiLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQTtnQkFDekIsT0FBTTtZQUNWLENBQUM7WUFDRCxVQUFVLEVBQUUsQ0FBQTtRQUNoQixDQUFDO0tBQ0osQ0FBQyxDQUFBO0FBQ04sQ0FBQyxDQUFBO0FBYlksUUFBQSxNQUFNLFVBYWxCO0FBRU0sTUFBTSxJQUFJLEdBQUcsQ0FDaEIsS0FBWSxFQUNjLEVBQUU7SUFDNUIsT0FBTyxJQUFBLGlEQUF3QixFQUFDO1FBQzVCLFNBQVMsRUFBRSxDQUFDLFVBQVUsRUFBRSxRQUFRLEVBQUUsRUFBRTtZQUNoQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDbkIsQ0FBQztLQUNKLENBQUMsQ0FBQTtBQUNOLENBQUMsQ0FBQTtBQVJZLFFBQUEsSUFBSSxRQVFoQjtBQUdNLE1BQU0sR0FBRyxHQUFHLENBQ2YsWUFBcUIsRUFDckIsYUFBbUMsRUFDbkMsa0JBQXlDLEVBQ2YsRUFBRTtJQUM1QixPQUFPLElBQUEsaURBQXdCLEVBQUM7UUFDNUIsU0FBUyxFQUFFLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxFQUFFO1lBQ2hDLElBQUksWUFBWSxFQUFFLENBQUM7Z0JBQ2YsSUFBQSxxQkFBVSxFQUFDLGFBQWEsQ0FBQyxDQUFDLE9BQU8sQ0FDN0IsVUFBVSxFQUNWLFFBQVEs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