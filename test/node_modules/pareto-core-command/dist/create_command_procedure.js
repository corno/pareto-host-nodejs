"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.create_command_procedure = void 0;
const create_command_promise_1 = require("./create_command_promise");
const sequence_1 = require("./sequence");
const create_command_procedure = (execution_handler) => {
    return ($cr, $qr) => {
        return {
            'execute': (parameters, error_transformer) => {
                return (0, create_command_promise_1.__create_command_promise)({
                    'execute': (on_success, on_error) => {
                        (0, sequence_1.__sequence)(execution_handler(parameters, $cr, $qr)).__start(on_success, ($) => {
                            on_error(error_transformer($));
                        });
                    }
                });
            },
        };
    };
};
exports.create_command_procedure = create_command_procedure;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlX2NvbW1hbmRfcHJvY2VkdXJlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NyZWF0ZV9jb21tYW5kX3Byb2NlZHVyZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFJQSxxRUFBbUU7QUFDbkUseUNBQXVDO0FBR2hDLE1BQU0sd0JBQXdCLEdBQUcsQ0FDcEMsaUJBSXlCLEVBQ2dFLEVBQUU7SUFDM0YsT0FBTyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNoQixPQUFPO1lBQ0gsU0FBUyxFQUFFLENBQUMsVUFBVSxFQUFFLGlCQUFpQixFQUFFLEVBQUU7Z0JBQ3pDLE9BQU8sSUFBQSxpREFBd0IsRUFBQztvQkFDNUIsU0FBUyxFQUFFLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxFQUFFO3dCQUVoQyxJQUFBLHFCQUFVLEVBQUMsaUJBQWlCLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FDdkQsVUFBVSxFQUNWLENBQUMsQ0FBQyxFQUFFLEVBQUU7NEJBQ0YsUUFBUSxDQUNKLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUN2QixDQUFBO3dCQUNMLENBQUMsQ0FDSixDQUFBO29CQUNMLENBQUM7aUJBQ0osQ0FBQyxDQUFBO1lBQ04sQ0FBQztTQUNKLENBQUE7SUFDTCxDQUFDLENBQUE7QUFDTCxDQUFDLENBQUE7QUExQlksUUFBQSx3QkFBd0IsNEJBMEJwQyJ9