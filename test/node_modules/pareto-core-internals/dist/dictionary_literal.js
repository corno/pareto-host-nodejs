"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.dictionary_literal = dictionary_literal;
const set_1 = require("./set");
const not_set_1 = require("./not_set");
const list_literal_1 = require("./list_literal");
/**
 * this is an implementation, not public by design
 */
class Dictionary {
    constructor(source) {
        this.source = source;
    }
    map($v) {
        return new Dictionary(this.source.map(($) => {
            return {
                key: $.key,
                value: $v($.value, $.key)
            };
        }));
    }
    to_list(handle_value) {
        return (0, list_literal_1.list_literal)(this.source.map(($) => {
            return handle_value($.value, $.key);
        }));
    }
    filter(handle_value) {
        const out = [];
        this.source.forEach(($) => {
            const result = handle_value($.value, $.key);
            result.map((new_value) => {
                out.push({
                    key: $.key,
                    value: new_value
                });
            });
        });
        return new Dictionary(out);
    }
    get_entry(key) {
        for (let i = 0; i !== this.source.length; i += 1) {
            const element = this.source[i];
            if (element.key === key) {
                return (0, set_1.set)(element.value);
            }
        }
        return (0, not_set_1.not_set)();
    }
    get_number_of_entries() {
        return this.source.length;
    }
    is_empty() {
        return this.source.length === 0;
    }
}
/**
 * returns a Exupery dictionary
 *
 * why is this not the constructor? to call a constructor, you have to use the keyword 'new'. Exupery doesn't use the concept of a class so that keyword should be avoided
 * @param source An object literal
 * @returns
 */
function dictionary_literal(source) {
    //first we clone the source data so that changes to that source will have no impact on this implementation.
    //only works if the set does not become extremely large
    function create_dictionary_as_array(source) {
        const imp = [];
        Object.keys(source).forEach((key) => {
            imp.push({ key: key, value: source[key] });
        });
        return imp;
    }
    const daa = create_dictionary_as_array(source);
    return new Dictionary(daa);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGljdGlvbmFyeV9saXRlcmFsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2RpY3Rpb25hcnlfbGl0ZXJhbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQWlGQSxnREFjQztBQTlGRCwrQkFBMkI7QUFDM0IsdUNBQW1DO0FBQ25DLGlEQUE2QztBQVM3Qzs7R0FFRztBQUNILE1BQU0sVUFBVTtJQUVaLFlBQVksTUFBOEI7UUFDdEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7SUFDeEIsQ0FBQztJQUNNLEdBQUcsQ0FDTixFQUFpQztRQUVqQyxPQUFPLElBQUksVUFBVSxDQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDNUMsT0FBTztnQkFDSCxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUc7Z0JBQ1YsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUM7YUFDNUIsQ0FBQTtRQUNMLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDUCxDQUFDO0lBQ0QsT0FBTyxDQUNILFlBQWlEO1FBRWpELE9BQU8sSUFBQSwyQkFBWSxFQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDdEMsT0FBTyxZQUFZLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDdkMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUNQLENBQUM7SUFFRCxNQUFNLENBQVcsWUFBcUU7UUFDbEYsTUFBTSxHQUFHLEdBQStCLEVBQUUsQ0FBQTtRQUMxQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3RCLE1BQU0sTUFBTSxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUU7Z0JBQ3JCLEdBQUcsQ0FBQyxJQUFJLENBQUM7b0JBQ0wsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHO29CQUNWLEtBQUssRUFBRSxTQUFTO2lCQUNuQixDQUFDLENBQUE7WUFDTixDQUFDLENBQUMsQ0FBQTtRQUNOLENBQUMsQ0FBQyxDQUFBO1FBQ0YsT0FBTyxJQUFJLFVBQVUsQ0FBVyxHQUFHLENBQUMsQ0FBQTtJQUN4QyxDQUFDO0lBRUQsU0FBUyxDQUNMLEdBQVc7UUFFWCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1lBQy9DLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDOUIsSUFBSSxPQUFPLENBQUMsR0FBRyxLQUFLLEdBQUcsRUFBRSxDQUFDO2dCQUN0QixPQUFPLElBQUEsU0FBRyxFQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUM3QixDQUFDO1FBQ0wsQ0FBQztRQUNELE9BQU8sSUFBQSxpQkFBTyxHQUFFLENBQUE7SUFDcEIsQ0FBQztJQUVELHFCQUFxQjtRQUNqQixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFBO0lBQzdCLENBQUM7SUFFRCxRQUFRO1FBQ0osT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUE7SUFDbkMsQ0FBQztDQUVKO0FBRUQ7Ozs7OztHQU1HO0FBQ0gsU0FBZ0Isa0JBQWtCLENBQUksTUFBcUM7SUFFdkUsMkdBQTJHO0lBQzNHLHVEQUF1RDtJQUV2RCxTQUFTLDBCQUEwQixDQUFJLE1BQXFDO1FBQ3hFLE1BQU0sR0FBRyxHQUF3QixFQUFFLENBQUE7UUFDbkMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtZQUNoQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtRQUM5QyxDQUFDLENBQUMsQ0FBQTtRQUNGLE9BQU8sR0FBRyxDQUFBO0lBQ2QsQ0FBQztJQUNELE1BQU0sR0FBRyxHQUFHLDBCQUEwQixDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQzlDLE9BQU8sSUFBSSxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDOUIsQ0FBQyJ9