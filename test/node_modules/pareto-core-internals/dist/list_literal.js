"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.list_literal = list_literal;
const not_set_1 = require("./not_set");
const set_1 = require("./set");
/**
 * this is an implementation, not public by design
 * If you feel the need to rename this class, don't rename it to 'Array',
 * it will break the 'instanceOf Array' test
 */
class List_Class {
    constructor(data) {
        this.data = data;
    }
    map($v) {
        return list_literal(this.data.map((entry) => {
            return $v(entry);
        }));
    }
    get_number_of_elements() {
        return this.data.length;
    }
    filter(handle_value) {
        const out = [];
        this.data.forEach(($) => {
            handle_value($).map(($) => {
                out.push($);
            });
        });
        return list_literal(out);
    }
    is_empty() {
        return this.data.length === 0;
    }
    append_element(new_element) {
        const new_data = this.data.slice();
        new_data.push(new_element);
        return new List_Class(new_data);
    }
    prepend_element(new_element) {
        const new_data = this.data.slice();
        new_data.unshift(new_element);
        return new List_Class(new_data);
    }
    reverse() {
        const new_data = this.data.slice();
        new_data.reverse();
        return new List_Class(new_data);
    }
    flatten(handle_element) {
        const out = [];
        this.data.forEach(($) => {
            const inner_list = handle_element($);
            inner_list.__for_each((inner_entry) => {
                out.push(inner_entry);
            });
        });
        return list_literal(out);
    }
    //internal methods
    __for_each($i) {
        this.data.forEach(($) => {
            $i($);
        });
    }
    __get_element_at(index) {
        if (index < 0 || index >= this.data.length) {
            return (0, not_set_1.not_set)();
        }
        return (0, set_1.set)(this.data[index]);
    }
    __get_raw_copy() {
        return this.data.slice();
    }
}
/**
 * returns a Exupery array

 * @param source An array literal
 * @returns
 */
function list_literal(source) {
    if (!(source instanceof Array)) {
        throw new Error("invalid input in 'list_literal'");
    }
    const data = source.slice(); //create a copy
    return new List_Class(data);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdF9saXRlcmFsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2xpc3RfbGl0ZXJhbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQWtHQSxvQ0FNQztBQXZHRCx1Q0FBbUM7QUFDbkMsK0JBQTJCO0FBRTNCOzs7O0dBSUc7QUFDSCxNQUFNLFVBQVU7SUFFWixZQUFZLElBQWtCO1FBQzFCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFBO0lBQ3BCLENBQUM7SUFDRCxHQUFHLENBQ0MsRUFBb0I7UUFFcEIsT0FBTyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUN4QyxPQUFPLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUNwQixDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ1AsQ0FBQztJQUdELHNCQUFzQjtRQUNsQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFBO0lBQzNCLENBQUM7SUFFRCxNQUFNLENBQVcsWUFBb0Q7UUFDakUsTUFBTSxHQUFHLEdBQWUsRUFBRSxDQUFBO1FBQzFCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDcEIsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO2dCQUN0QixHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQ2YsQ0FBQyxDQUFDLENBQUE7UUFDTixDQUFDLENBQUMsQ0FBQTtRQUNGLE9BQU8sWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQzVCLENBQUM7SUFFRCxRQUFRO1FBQ0osT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUE7SUFDakMsQ0FBQztJQUVELGNBQWMsQ0FBQyxXQUFjO1FBQ3pCLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7UUFDbEMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUMxQixPQUFPLElBQUksVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFRCxlQUFlLENBQUMsV0FBYztRQUMxQixNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ2xDLFFBQVEsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUE7UUFDN0IsT0FBTyxJQUFJLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQTtJQUNuQyxDQUFDO0lBRUQsT0FBTztRQUNILE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7UUFDbEMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQ2xCLE9BQU8sSUFBSSxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVELE9BQU8sQ0FDSCxjQUE0QztRQUU1QyxNQUFNLEdBQUcsR0FBZSxFQUFFLENBQUE7UUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUNwQixNQUFNLFVBQVUsR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDcEMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFO2dCQUNsQyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1lBQ3pCLENBQUMsQ0FBQyxDQUFBO1FBQ04sQ0FBQyxDQUFDLENBQUE7UUFDRixPQUFPLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUM1QixDQUFDO0lBR0Qsa0JBQWtCO0lBQ2xCLFVBQVUsQ0FBQyxFQUFrQjtRQUN6QixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3BCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNULENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUNELGdCQUFnQixDQUFDLEtBQWE7UUFDMUIsSUFBSSxLQUFLLEdBQUcsQ0FBQyxJQUFJLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ3pDLE9BQU8sSUFBQSxpQkFBTyxHQUFLLENBQUE7UUFDdkIsQ0FBQztRQUNELE9BQU8sSUFBQSxTQUFHLEVBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFBO0lBQ2hDLENBQUM7SUFDRCxjQUFjO1FBQ1YsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO0lBQzVCLENBQUM7Q0FHSjtBQUVEOzs7OztHQUtHO0FBQ0gsU0FBZ0IsWUFBWSxDQUFJLE1BQW9CO0lBQ2hELElBQUksQ0FBQyxDQUFDLE1BQU0sWUFBWSxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQzdCLE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQTtJQUN0RCxDQUFDO0lBQ0QsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFBLENBQUMsZUFBZTtJQUMzQyxPQUFPLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFBO0FBQy9CLENBQUMifQ==