"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.create_astn_token_iterator = exports.throw_unexpected_token = exports.throw_lexer_error = void 0;
const throw_parse_error = (type, range, abort) => {
    abort({
        'type': type,
        'range': range,
    });
};
const throw_lexer_error = (type, range, abort) => {
    return abort({
        'type': type,
        'range': range,
    });
};
exports.throw_lexer_error = throw_lexer_error;
const throw_unexpected_token = (found, expected, abort) => {
    return throw_parse_error({
        'expected': expected,
        'cause': ['unexpected token', {
                'found': found.type,
            }]
    }, {
        'start': found.start,
        'end': found.end
    }, abort);
};
exports.throw_unexpected_token = throw_unexpected_token;
const create_astn_token_iterator = ($, end, abort) => {
    let position = 0;
    return {
        'get required token': (pet) => {
            return $.__get_element_at(position).transform(($) => $, () => throw_parse_error({
                'expected': pet,
                'cause': ['missing token', null]
            }, {
                'start': end,
                'end': end,
            }, abort));
        },
        'consume token': () => {
            position += 1;
        },
    };
};
exports.create_astn_token_iterator = create_astn_token_iterator;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXN0bl9wYXJzZV9nZW5lcmljLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2ltcGxlbWVudGF0aW9uL2dlbmVyYXRlZC9wYXJldG8vZ2VuZXJpYy9wYXJzZS9hc3RuX3BhcnNlX2dlbmVyaWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBbUJBLE1BQU0saUJBQWlCLEdBQUcsQ0FDdEIsSUFBaUMsRUFDakMsS0FBdUIsRUFDdkIsS0FBbUMsRUFDOUIsRUFBRTtJQUNQLEtBQUssQ0FBQztRQUNGLE1BQU0sRUFBRSxJQUFJO1FBQ1osT0FBTyxFQUFFLEtBQUs7S0FDakIsQ0FBQyxDQUFBO0FBQ04sQ0FBQyxDQUFBO0FBRU0sTUFBTSxpQkFBaUIsR0FBRyxDQUM3QixJQUFnQyxFQUNoQyxLQUF1QixFQUN2QixLQUFtQyxFQUM5QixFQUFFO0lBQ1AsT0FBTyxLQUFLLENBQUM7UUFDVCxNQUFNLEVBQUUsSUFBSTtRQUNaLE9BQU8sRUFBRSxLQUFLO0tBQ2pCLENBQUMsQ0FBQTtBQUNOLENBQUMsQ0FBQTtBQVRZLFFBQUEsaUJBQWlCLHFCQVM3QjtBQUVNLE1BQU0sc0JBQXNCLEdBQUcsQ0FDbEMsS0FBaUMsRUFDakMsUUFBMkMsRUFDM0MsS0FBbUMsRUFDOUIsRUFBRTtJQUNQLE9BQU8saUJBQWlCLENBQ3BCO1FBQ0ksVUFBVSxFQUFFLFFBQVE7UUFDcEIsT0FBTyxFQUFFLENBQUMsa0JBQWtCLEVBQUU7Z0JBQzFCLE9BQU8sRUFBRSxLQUFLLENBQUMsSUFBSTthQUN0QixDQUFDO0tBQ0wsRUFDRDtRQUNJLE9BQU8sRUFBRSxLQUFLLENBQUMsS0FBSztRQUNwQixLQUFLLEVBQUUsS0FBSyxDQUFDLEdBQUc7S0FDbkIsRUFDRCxLQUFLLENBQ1IsQ0FBQTtBQUNMLENBQUMsQ0FBQTtBQWxCWSxRQUFBLHNCQUFzQiwwQkFrQmxDO0FBSU0sTUFBTSwwQkFBMEIsR0FBRyxDQUN0QyxDQUFxQyxFQUNyQyxHQUFnQixFQUNoQixLQUFtQyxFQUNoQixFQUFFO0lBQ3JCLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQTtJQUNoQixPQUFPO1FBQ0gsb0JBQW9CLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRTtZQUMxQixPQUFPLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxTQUFTLENBQ3pDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQ1IsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQ25CO2dCQUNJLFVBQVUsRUFBRSxHQUFHO2dCQUNmLE9BQU8sRUFBRSxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUM7YUFDbkMsRUFDRDtnQkFDSSxPQUFPLEVBQUUsR0FBRztnQkFDWixLQUFLLEVBQUUsR0FBRzthQUNiLEVBQ0QsS0FBSyxDQUNSLENBQ0osQ0FBQTtRQUNMLENBQUM7UUFDRCxlQUFlLEVBQUUsR0FBRyxFQUFFO1lBQ2xCLFFBQVEsSUFBSSxDQUFDLENBQUE7UUFDakIsQ0FBQztLQUNKLENBQUE7QUFDTCxDQUFDLENBQUE7QUEzQlksUUFBQSwwQkFBMEIsOEJBMkJ0QyJ9